
ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 1





       MCS-51 Family Macro Assembler   A S E M - 5 1   V 1.3
       =====================================================



	Source File:	..\..\..\..\TrafficLight\traflight.asm
	Object File:	..\..\..\..\TrafficLight\traflight.hex
	List File:	..\..\..\..\TrafficLight\traflight.lst



 Line  I  Addr  Code            Source

    1:				;;------------------------
    2:				;;TrafLight v1.5
    3:				;;by SN icetiny@gmail.com
    4:				;;2011-6-10
    5:				;;完成键盘基本功能
    6:				;;------------------------
    7:				;;R0	 R1			  R2			  R3 			R6		  R7
					  R5			 R4
    8:				;;灯状态 临时使用 2红灯倒计时	  1绿灯倒计时    秒状态数码	 分状态	  空	 屏状态（0开1选段2调
				路口A时间3调路口B时间）
    9:				;;------------------------
   10:				;;30H   31H      32H-35H	   36H            37H			38H		 39H
							 3AH         3BH     3CH			位7F	   3DH
										3EH
   11:				;;红灯A 红灯B	灯状态地址 减一用  当前小时状态码  LED显示寄存器 数码管地址高八位	 屏段(HEX码)
				 屏绿灯 屏红灯（BCD码）	选位标志   BCDINC和BCDDEC子程序的操作位	   闪烁关灯程序数据传递位
   12:				;;------------------------
   13:				;;50H-7FH			  40H 41H				  位7E
   14:				;;用户定义灯状态	  delay10中用到的变量  区分一秒中的上下半秒
   15:				;;------------------------
   16:				;;键盘
   17:				;; 1        2       3          4  5
   18:				;;on/off   ok/next	<>选位	   +  -
   19:				;;------------------------
   20:
   21:		N      0000			ORG 0000H
   22:	  0000	01 30				AJMP MAIN
   23:				;----------------INTERRUPT VECTORS--------------------------
   24:		N      0003			ORG 0003H ;外部中断0
   25:	  0003	02 01 8F			LJMP INT_EX0
   26:		N      000B			ORG 000BH
   27:	  000B	02 00 9E			LJMP INT_TO
   28:		N      0013			ORG 0013H ;外部中断1
   29:	  0013	02 01 CD			LJMP INT_EX1
   30:		N      001B			ORG 001BH
   31:	  001B	02 00 AD			LJMP INT_C1
   32:				;------------DEFINE CONSTANT VALUE--------------------------
   33:		N      00F8			LDD1 EQU 0f8H ;数码管地址
   34:		N      00F9			LDD2 EQU 0f9H
   35:		N      00FA			LDD3 EQU 0faH
   36:		N      00FB			LDD4 EQU 0fbH
   37:		N      00FC			LDD5 EQU 0fcH
   38:		N      00FD			LDD6 EQU 0fdH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 2



 Line  I  Addr  Code            Source

   39:		N      00FE			LED  EQU 0feH ;灯地址
   40:		N      000C			G_R1 EQU 1100B
   41:		N      000A			Y_R2 EQU 1010B
   42:		N      0021			R_G3 EQU 100001B
   43:		N      0011			R_Y4 EQU 10001B
   44:		N      0004			SECS_PER_MIN EQU 4  ;每分中的秒数，调试用
   45:		N      0005			MINS_PER_HOUR EQU 5 ;每小时中的分数，调试用


   46:				;-----------------------------------------------------------
   47:				;;--------------MAIN PROGRAM BEGIN---------------------------
   48:		N      0030			ORG 0030H
   49:	  0030			MAIN:
   50:	  0030	75 81 10			MOV SP,#10H
   51:	  0033	75 90 0F			MOV P1,#0FH
   52:	  0036	75 32 0C			MOV 32H,#G_R1
   53:	  0039	75 33 0A			MOV 33H,#Y_R2
   54:	  003C	75 34 21			MOV 34H,#R_G3
   55:	  003F	75 35 11			MOV 35H,#R_Y4
   56:	  0042	75 89 61			MOV TMOD,#61H	;初始化计时器 定时器0方式1 计数器1方式2
   57:	  0045	75 8C E7			MOV TH0,#0E7H
   58:	  0048	75 8A 00			MOV TL0,#00H	;2^16-6400 = 59136 = E700, 12*2*72*6400=11.0592MHz，取得较小是为了照
				顾WDT看门狗
   59:	  004B	75 8D DC			MOV TH1,#0DCH
   60:	  004E	75 8B DC			MOV TL1,#0DCH	;36. 0.5S ;
   61:	  0051	7E 04				MOV R6,#SECS_PER_MIN ;每分中的秒数，调试用
   62:	  0053	7F 05				MOV R7,#MINS_PER_HOUR ;每小时中的分数，调试用
   63:	  0055	75 37 08			MOV 37H,#8		;初始化当前时间（小时状态）
   64:						;MOV 7EH,#03H	;测试RAM中红绿灯时间表用
   65:						;MOV 7FH,#00H
   66:	  0058	12 03 E0			LCALL GET_LIGHT_TIME ;获取倒计时时间存入 30H,31H
   67:	  005B	78 32				MOV R0,#32H	;R0记录信号灯寄存器状态
   68:	  005D	AA 30				MOV R2,30H
   69:	  005F	AB 30				MOV R3,30H
   70:	  0061	8B 36				MOV 36H,R3
   71:	  0063	12 04 72			LCALL SUBBCD
   72:	  0066	12 04 72			LCALL SUBBCD
   73:	  0069	12 04 72			LCALL SUBBCD
   74:	  006C	AB 36				MOV R3,36H
   75:	  006E	12 04 23			LCALL CHANGE_LIGHT	;开信号灯
   76:	  0071	8B 38				MOV 38H,R3	   ;送显示，开数码管
   77:	  0073	75 39 F9			MOV 39H,#LDD2
   78:	  0076	12 04 31			LCALL DISPLAY_NUMBER
   79:	  0079	8A 38				MOV 38H,R2
   80:	  007B	75 39 FB			MOV 39H,#LDD4
   81:	  007E	12 04 31			LCALL DISPLAY_NUMBER
   82:						;中断优先级处理
   83:	  0081	75 B8 0A			MOV IP,#00001010B	 ;优先级依次为 t0 t1 x0 x1
   84:	  0084	D2 A9				SETB ET0
   85:	  0086	D2 AB				SETB ET1
   86:	  0088	D2 A8				SETB EX0
   87:	  008A	D2 AA				SETB EX1
   88:	  008C	D2 AF				SETB EA
   89:	  008E	D2 88				SETB IT0
   90:	  0090	D2 8A				SETB IT1
   91:	  0092	D2 8C				SETB TR0

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 3



 Line  I  Addr  Code            Source

   92:	  0094	D2 8E				SETB TR1
   93:	  0096	75 A6 1E			MOV 0A6H,#01EH ;激活看门狗
   94:	  0099	75 A6 E1			MOV 0A6H,#0E1H
   95:						;初始化完毕，开始计时
   96:	  009C	80 FE				SJMP $
   97:				;;-------------- END OF MAIN -----------------
   98:	  009E			INT_TO:								;计时器0中断处理程序
   99:	  009E	75 8C E7			MOV TH0,#0E7H 				; 时间常数仍待优化
  100:	  00A1	75 8A 00			MOV TL0,#00H
  101:	  00A4	75 A6 1E			MOV 0A6H,#01EH ;清零看门狗
  102:	  00A7	75 A6 E1			MOV 0A6H,#0E1H
  103:	  00AA	B2 B5				CPL P3.5
  104:	  00AC	32				RETI
  105:
  106:	  00AD			INT_C1:								;计数器1中断处理程序
  107:	  00AD	C0 E0				PUSH ACC
  108:	  00AF	B2 7E				CPL 7EH
  109:	  00B1	20 7E 1E			JB 7EH,INT_C1_NORMAL
  110:	  00B4			INT_C1_BLINK:
  111:	  00B4	EC				MOV A,R4
  112:	  00B5	60 18				JZ INT_C1_BLINK_EXIT
  113:	  00B7	EC				MOV A,R4
  114:	  00B8	C3				CLR C
  115:	  00B9	94 02				SUBB A,#2
  116:	  00BB	10 D7 11			JBC CY,INT_C1_BLINK_EXIT
  117:	  00BE	70 09				JNZ INT_C1_BLINK_RED
  118:	  00C0	85 3B 3E			MOV 3EH,3BH
  119:	  00C3	12 03 B7			LCALL CLOSEDIG
  120:	  00C6	02 01 8C			LJMP INT_C1_EXIT1
  121:	  00C9			INT_C1_BLINK_RED:
  122:	  00C9	85 3C 3E			MOV 3EH,3CH
  123:	  00CC	12 03 B7			LCALL CLOSEDIG
  124:	  00CF			INT_C1_BLINK_EXIT:
  125:	  00CF	02 01 8C			LJMP INT_C1_EXIT1
  126:	  00D2			INT_C1_NORMAL:
  127:	  00D2	EC				MOV A,R4
  128:	  00D3	60 1E				JZ INT_C1_NORMAL1
  129:	  00D5	EC				MOV A,R4
  130:	  00D6	C3				CLR C
  131:	  00D7	94 02				SUBB A,#2
  132:	  00D9	10 D7 17			JBC CY,INT_C1_NORMAL1
  133:	  00DC	70 0C				JNZ INT_C1_UNBLINK_RED
  134:	  00DE	85 3B 38			MOV 38H,3BH
  135:	  00E1	75 39 FD			MOV 39H,#LDD6
  136:	  00E4	12 04 31			LCALL DISPLAY_NUMBER
  137:	  00E7	02 00 F3			LJMP INT_C1_NORMAL1
  138:	  00EA			INT_C1_UNBLINK_RED:
  139:	  00EA	85 3C 38			MOV 38H,3CH
  140:	  00ED	75 39 FD			MOV 39H,#LDD6
  141:	  00F0	12 04 31			LCALL DISPLAY_NUMBER
  142:	  00F3	8B 36		INT_C1_NORMAL1:		MOV 36H,R3
  143:	  00F5	12 04 72			LCALL SUBBCD
  144:	  00F8	AB 36				MOV R3,36H
  145:	  00FA	8A 36				MOV 36H,R2
  146:	  00FC	12 04 72			LCALL SUBBCD
  147:	  00FF	AA 36				MOV R2,36H

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 4



 Line  I  Addr  Code            Source

  148:	  0101	BA F9 3F			CJNE R2,#0F9H,INT_C1_NEXT2
  149:	  0104	08				INC R0
  150:	  0105	B8 36 18			CJNE R0,#36H,INT_C1_NEXT0
  151:	  0108	78 32				MOV R0,#32H
  152:	  010A	12 04 23			LCALL CHANGE_LIGHT
  153:	  010D	AA 30				MOV R2,30H
  154:	  010F	AB 30				MOV R3,30H	   ;绿灯时间比红灯时间短3秒
  155:	  0111	8B 36				MOV 36H,R3
  156:	  0113	12 04 72			LCALL SUBBCD
  157:	  0116	12 04 72			LCALL SUBBCD
  158:	  0119	12 04 72			LCALL SUBBCD
  159:	  011C	AB 36				MOV R3,36H
  160:	  011E	80 2C				SJMP INT_C1_EXIT
  161:	  0120			INT_C1_NEXT0:
  162:	  0120	B8 34 16			CJNE R0,#34H,INT_C1_NEXT1
  163:	  0123	12 04 23			LCALL CHANGE_LIGHT
  164:	  0126	AA 31				MOV R2,31H
  165:	  0128	AB 31				MOV R3,31H	   ;绿灯时间比红灯时间短3秒
  166:	  012A	8B 36				MOV 36H,R3
  167:	  012C	12 04 72			LCALL SUBBCD
  168:	  012F	12 04 72			LCALL SUBBCD
  169:	  0132	12 04 72			LCALL SUBBCD
  170:	  0135	AB 36				MOV R3,36H
  171:	  0137	80 13				SJMP INT_C1_EXIT
  172:	  0139			INT_C1_NEXT1:
  173:	  0139	B8 35 07			CJNE R0,#35H,INT_C1_NEXT2
  174:	  013C	12 04 23			LCALL CHANGE_LIGHT
  175:	  013F	EB				MOV A,R3
  176:	  0140	CA				XCH A,R2
  177:	  0141	80 09				SJMP INT_C1_EXIT
  178:	  0143			INT_C1_NEXT2:
  179:	  0143	BB F9 06			CJNE R3,#0F9H,INT_C1_EXIT
  180:	  0146	08				INC R0
  181:	  0147	12 04 23			LCALL CHANGE_LIGHT
  182:	  014A	EA				MOV A,R2
  183:	  014B	CB				XCH A,R3
  184:	  014C			INT_C1_EXIT:
  185:	  014C	E8				MOV A,R0
  186:	  014D	C2 D7				CLR CY
  187:	  014F	94 33				SUBB A,#33H
  188:	  0151	30 D7 13			JNB CY,INT_C1_REVERSEDISPLAY
  189:	  0154	8B 38				MOV 38H,R3	   ;送显示
  190:	  0156	75 39 F9			MOV 39H,#LDD2
  191:	  0159	12 04 31			LCALL DISPLAY_NUMBER
  192:	  015C	8A 38				MOV 38H,R2
  193:	  015E	75 39 FB			MOV 39H,#LDD4
  194:	  0161	12 04 31			LCALL DISPLAY_NUMBER
  195:	  0164	02 01 77			LJMP INT_C1_EXIT00
  196:	  0167			INT_C1_REVERSEDISPLAY:	;调换显示的内容（原来显示红灯倒计时，现在则显示绿灯倒计时）
  197:	  0167	8A 38				MOV 38H,R2
  198:	  0169	75 39 F9			MOV 39H,#LDD2
  199:	  016C	12 04 31			LCALL DISPLAY_NUMBER
  200:	  016F	8B 38				MOV 38H,R3
  201:	  0171	75 39 FB			MOV 39H,#LDD4
  202:	  0174	12 04 31			LCALL DISPLAY_NUMBER
  203:	  0177			INT_C1_EXIT00:

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 5



 Line  I  Addr  Code            Source

  204:	  0177	DE 13				DJNZ R6,INT_C1_EXIT1
  205:	  0179	7E 04				MOV R6,#SECS_PER_MIN
  206:	  017B	DF 0F				DJNZ R7,INT_C1_EXIT1
  207:	  017D	7F 05				MOV R7,#MINS_PER_HOUR
  208:	  017F	05 37				INC 37H
  209:	  0181	E5 37				MOV A,37H
  210:	  0183	B4 18 03			CJNE A,#24,INT_C1_EXIT0
  211:	  0186	75 37 00			MOV 37H,#0
  212:	  0189			INT_C1_EXIT0:
  213:	  0189	12 03 E0			LCALL GET_LIGHT_TIME
  214:	  018C			INT_C1_EXIT1:
  215:	  018C	D0 E0				POP ACC
  216:	  018E	32				RETI
  217:				;-------------地感线圈中断处理----------------
  218:	  018F			INT_EX0:
  219:	  018F	C0 E0				PUSH ACC
  220:	  0191	E5 90				MOV A,P1
  221:	  0193	B8 32 03						CJNE R0,#32H,INT_EX0_NEXT1
  222:	  0196	02 01 B5						LJMP INT_EX0_SHOOT2
  223:	  0199	B8 33 03	INT_EX0_NEXT1:		CJNE R0,#33H,INT_EX0_NEXT2
  224:	  019C	02 01 B5						LJMP INT_EX0_SHOOT2
  225:	  019F	B8 34 03	INT_EX0_NEXT2:		CJNE R0,#34H,INT_EX0_NEXT3
  226:	  01A2	02 01 A8						LJMP INT_EX0_SHOOT1
  227:	  01A5	B8 35 17	INT_EX0_NEXT3:		CJNE R0,#35H,INT_EX0_EXIT
  228:	  01A8	20 E0 02	INT_EX0_SHOOT1:		JB ACC.0,INT_EX0_SHOOT11
  229:	  01AB	D2 94							SETB P1.4
  230:	  01AD			INT_EX0_SHOOT11:
  231:	  01AD	20 E1 0F						JB ACC.1,INT_EX0_EXIT
  232:	  01B0	D2 95							SETB P1.5
  233:	  01B2	02 01 BF						LJMP INT_EX0_EXIT
  234:	  01B5	20 E2 02	INT_EX0_SHOOT2:		JB ACC.2,INT_EX0_SHOOT22
  235:	  01B8	D2 96							SETB P1.6
  236:	  01BA			INT_EX0_SHOOT22:
  237:	  01BA	20 E3 02						JB ACC.3,INT_EX0_EXIT
  238:	  01BD	D2 97							SETB P1.7
  239:	  01BF			INT_EX0_EXIT:
  240:	  01BF	74 1E				MOV A,#30
  241:	  01C1			INT_EX0_EXIT0:
  242:	  01C1	12 04 8C			LCALL DELAY10
  243:	  01C4	D5 E0 FA			DJNZ ACC,INT_EX0_EXIT0
  244:	  01C7			INT_EX0_EXIT1:
  245:	  01C7	75 90 0F			MOV P1,#0FH
  246:	  01CA	D0 E0				POP ACC
  247:	  01CC	32				RETI
  248:				;-------------按键中断处理程序----------------
  249:	  01CD			INT_EX1:							;外部中断1处理，键盘
  250:	  01CD	C0 D0				PUSH PSW
  251:	  01CF	C0 E0				PUSH ACC
  252:	  01D1	E5 A0				MOV A,P2   ;判断是否有键按下
  253:	  01D3	54 F8				ANL A,#0F8H
  254:	  01D5	64 F8				XRL A,#0F8H
  255:	  01D7	60 29				JZ INT_EX1_EXIT
  256:	  01D9	12 04 8C			LCALL DELAY10
  257:	  01DC	E5 A0				MOV A,P2   ;再次判断是否有键按下,消除前沿抖动
  258:	  01DE	54 F8				ANL A,#0F8H
  259:	  01E0	64 F8				XRL A,#0F8H

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 6



 Line  I  Addr  Code            Source

  260:	  01E2	60 1E				JZ INT_EX1_EXIT
  261:	  01E4	20 E3 0C			JB ACC.3,KEY01
  262:	  01E7	20 E4 0C			JB ACC.4,KEY02
  263:	  01EA	20 E5 0C			JB ACC.5,KEY03
  264:	  01ED	20 E6 0C			JB ACC.6,KEY04
  265:	  01F0	20 E7 0C			JB ACC.7,KEY05
  266:	  01F3	02 02 14			KEY01:LJMP KEY1
  267:	  01F6	02 02 42			KEY02:LJMP KEY2
  268:	  01F9	02 02 BA			KEY03:LJMP KEY3
  269:	  01FC	02 02 BF			KEY04:LJMP KEY4
  270:	  01FF	02 03 10			KEY05:LJMP KEY5
  271:	  0202			INT_EX1_EXIT:
  272:	  0202	E5 A0				MOV A,P2   ;判断是否有键按下，消除后沿抖动
  273:	  0204	54 F8				ANL A,#0F8H
  274:	  0206	64 F8				XRL A,#0F8H
  275:	  0208	60 05				JZ INT_EX1_EXIT_1
  276:	  020A	12 04 9D			LCALL DELAY4ms5
  277:	  020D	80 F3				SJMP INT_EX1_EXIT
  278:	  020F			INT_EX1_EXIT_1:
  279:	  020F	D0 E0				POP ACC
  280:	  0211	D0 D0				POP PSW
  281:	  0213	32				RETI
  282:
  283:	  0214			KEY1: ;开关键
  284:	  0214	BC 00 14			CJNE R4,#00,KEY1_NEXT1
  285:	  0217	7C 01				MOV R4,#1		 ;开启屏
  286:	  0219	85 37 3A			MOV 3AH,37H
  287:	  021C	85 3A 38			MOV 38H,3AH
  288:	  021F	12 03 D0			LCALL HEX2BCD
  289:	  0222	75 39 FD			MOV 39H,#LDD6
  290:	  0225	12 04 31			LCALL DISPLAY_NUMBER
  291:	  0228	02 02 02			LJMP INT_EX1_EXIT
  292:	  022B			KEY1_NEXT1:
  293:	  022B	7C 00				MOV R4,#0		 ;关闭屏
  294:	  022D	75 3A 00			MOV 3AH,#0
  295:	  0230	75 3B 00			MOV 3BH,#0
  296:	  0233	75 3C 00			MOV 3CH,#0
  297:	  0236	75 38 FF			MOV 38H,#0FFH
  298:	  0239	75 39 FD			MOV 39H,#LDD6
  299:	  023C	12 04 31			LCALL DISPLAY_NUMBER
  300:	  023F	02 02 02			LJMP INT_EX1_EXIT
  301:
  302:	  0242			KEY2:	;确认键，OK键
  303:	  0242	EC				MOV A,R4
  304:	  0243	F9				MOV R1,A
  305:	  0244	B9 00 03			CJNE R1,#0,KEY2_R01
  306:	  0247	02 02 02	 		LJMP INT_EX1_EXIT
  307:	  024A	D9 03		KEY2_R01:		DJNZ R1,KEY2_R02
  308:	  024C	02 02 59					LJMP KEY2_R1
  309:	  024F	D9 03		KEY2_R02:		DJNZ R1,KEY2_R03
  310:	  0251	02 02 66					LJMP KEY2_R2
  311:	  0254	D9 AC		KEY2_R03:		DJNZ R1,INT_EX1_EXIT
  312:	  0256	02 02 73					LJMP KEY2_R3
  313:	  0259			KEY2_R1:
  314:	  0259	0C				INC R4
  315:	  025A	85 3B 38			MOV 38H,3BH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 7



 Line  I  Addr  Code            Source

  316:	  025D	75 39 FD			MOV 39H,#LDD6
  317:	  0260	12 04 31			LCALL DISPLAY_NUMBER
  318:	  0263	02 02 02			LJMP INT_EX1_EXIT
  319:	  0266			KEY2_R2:
  320:	  0266	0C				INC R4
  321:	  0267	85 3C 38			MOV 38H,3CH
  322:	  026A	75 39 FD			MOV 39H,#LDD6
  323:	  026D	12 04 31			LCALL DISPLAY_NUMBER
  324:	  0270	02 02 02			LJMP INT_EX1_EXIT
  325:	  0273			KEY2_R3:
  326:	  0273	7C 01				MOV R4,#1
  327:	  0275	85 3A 38			MOV 38H,3AH
  328:	  0278	12 03 D0			LCALL HEX2BCD
  329:	  027B	75 39 FD			MOV 39H,#LDD6
  330:	  027E	12 04 31			LCALL DISPLAY_NUMBER
  331:	  0281	E5 3A				MOV A,3AH
  332:	  0283	23				RL A
  333:	  0284	24 50				ADD A,#50H
  334:	  0286	C9				XCH A,R1
  335:	  0287	E5 3B				MOV A,3BH
  336:	  0289	C2 D7				CLR CY
  337:	  028B	94 03				SUBB A,#3
  338:	  028D	30 D7 03			JNB CY, KEY2_R3_NEXT1
  339:	  0290	75 3B 00			MOV 3BH,#00H
  340:	  0293			KEY2_R3_NEXT1:
  341:	  0293	A7 3B				MOV @R1,3BH
  342:	  0295	09				INC R1
  343:	  0296	E5 3C				MOV A,3CH
  344:	  0298	C2 D7				CLR CY
  345:	  029A	94 03				SUBB A,#3
  346:	  029C	30 D7 03			JNB CY, KEY2_R3_NEXT2
  347:	  029F	75 3C 00			MOV 3CH,#00H
  348:	  02A2			KEY2_R3_NEXT2:
  349:	  02A2	A7 3C				MOV @R1,3CH
  350:	  02A4	75 3B 00			MOV 3BH,#00H
  351:	  02A7	75 3C 00			MOV 3CH,#00H
  352:	  02AA	A9 3A				MOV R1,3AH	 ;如果更改的为当前时间段，则立即调用GET_LIGHT_TIME重载倒计时时间
  353:	  02AC	E5 37				MOV A,37H
  354:	  02AE	C2 D7				CLR CY
  355:	  02B0	99				SUBB A,R1
  356:	  02B1	B4 00 03			CJNE A,#00H,KEY2_R3_EXIT
  357:	  02B4	12 03 E0			LCALL GET_LIGHT_TIME
  358:	  02B7			KEY2_R3_EXIT:
  359:	  02B7	02 02 02			LJMP INT_EX1_EXIT
  360:
  361:	  02BA	B2 7F		KEY3:	CPL 7FH						;选位数
  362:	  02BC	02 02 02			LJMP INT_EX1_EXIT
  363:
  364:	  02BF			KEY4:			         ;加一
  365:	  02BF	EC				MOV A,R4
  366:	  02C0	F9				MOV R1,A
  367:	  02C1	B9 00 03			CJNE R1,#0,KEY4_R01
  368:	  02C4	02 02 02	 		LJMP INT_EX1_EXIT
  369:	  02C7	D9 19		KEY4_R01:		DJNZ R1,KEY4_R02
  370:	  02C9	05 3A						INC 3AH
  371:	  02CB	E5 3A						MOV A,3AH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 8



 Line  I  Addr  Code            Source

  372:	  02CD	B4 18 03					CJNE A,#24,KEY4_R01_next
  373:	  02D0	75 3A 00					MOV 3AH,#0
  374:	  02D3	85 3A 38	KEY4_R01_next:	MOV 38H,3AH
  375:	  02D6	12 03 D0					LCALL HEX2BCD
  376:	  02D9	75 39 FD					MOV 39H,#LDD6
  377:	  02DC	12 04 31					LCALL DISPLAY_NUMBER
  378:	  02DF	02 02 02					LJMP INT_EX1_EXIT
  379:	  02E2	D9 15		KEY4_R02:		DJNZ R1,KEY4_R03
  380:	  02E4	85 3B 3D					MOV 3DH,3BH
  381:	  02E7	12 03 61					LCALL BCDINC
  382:	  02EA	85 3D 3B					MOV 3BH,3DH
  383:	  02ED	85 3B 38					MOV 38H,3BH
  384:	  02F0	75 39 FD					MOV 39H,#LDD6
  385:	  02F3	12 04 31					LCALL DISPLAY_NUMBER
  386:	  02F6	02 02 02					LJMP INT_EX1_EXIT
  387:	  02F9	D9 12		KEY4_R03:		DJNZ R1,KEY4_EXIT
  388:	  02FB	85 3C 3D					MOV 3DH,3CH
  389:	  02FE	12 03 61					LCALL BCDINC
  390:	  0301	85 3D 3C					MOV 3CH,3DH
  391:	  0304	85 3C 38					MOV 38H,3CH
  392:	  0307	75 39 FD					MOV 39H,#LDD6
  393:	  030A	12 04 31					LCALL DISPLAY_NUMBER
  394:	  030D	02 02 02	KEY4_EXIT:		LJMP INT_EX1_EXIT
  395:
  396:	  0310	EC		KEY5: 			MOV A,R4		;减一
  397:	  0311	F9						MOV R1,A
  398:	  0312	B9 00 03					CJNE R1,#0,KEY5_R01
  399:	  0315	02 02 02	 				LJMP INT_EX1_EXIT
  400:	  0318	D9 19		KEY5_R01:		DJNZ R1,KEY5_R02
  401:	  031A	E5 3A						MOV A,3AH
  402:	  031C	B4 00 03					CJNE A,#0,KEY5_R01_next
  403:	  031F	75 3A 18					MOV 3AH,#24
  404:	  0322	15 3A		KEY5_R01_next:	DEC 3AH
  405:	  0324	85 3A 38					MOV 38H,3AH
  406:	  0327	12 03 D0					LCALL HEX2BCD
  407:	  032A	75 39 FD					MOV 39H,#LDD6
  408:	  032D	12 04 31					LCALL DISPLAY_NUMBER
  409:	  0330	02 02 02					LJMP INT_EX1_EXIT
  410:	  0333	D9 15		KEY5_R02:		DJNZ R1,KEY5_R03
  411:	  0335	85 3B 3D					MOV 3DH,3BH
  412:	  0338	12 03 8C					LCALL BCDDEC
  413:	  033B	85 3D 3B					MOV 3BH,3DH
  414:	  033E	85 3B 38					MOV 38H,3BH
  415:	  0341	75 39 FD					MOV 39H,#LDD6
  416:	  0344	12 04 31					LCALL DISPLAY_NUMBER
  417:	  0347	02 02 02					LJMP INT_EX1_EXIT
  418:	  034A	D9 12		KEY5_R03:		DJNZ R1,KEY5_EXIT
  419:	  034C	85 3C 3D					MOV 3DH,3CH
  420:	  034F	12 03 8C					LCALL BCDDEC
  421:	  0352	85 3D 3C					MOV 3CH,3DH
  422:	  0355	85 3C 38					MOV 38H,3CH
  423:	  0358	75 39 FD					MOV 39H,#LDD6
  424:	  035B	12 04 31					LCALL DISPLAY_NUMBER
  425:	  035E	02 02 02	KEY5_EXIT:		LJMP INT_EX1_EXIT
  426:
  427:	  0361	C0 E0		BCDINC:	PUSH ACC

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 9



 Line  I  Addr  Code            Source

  428:	  0363	E5 3D				MOV A,3DH
  429:	  0365	20 7F 10			JB 7FH,BCDINC_HIGH
  430:	  0368	54 0F				ANL A,#0FH
  431:	  036A	B4 09 06			CJNE A,#09H,BCDINC_LOW1
  432:	  036D	53 3D F0			ANL 3DH,#0F0H
  433:	  0370	02 03 89			LJMP BCDINC_EXIT
  434:	  0373			BCDINC_LOW1:
  435:	  0373	05 3D				INC 3DH
  436:	  0375	02 03 89			LJMP BCDINC_EXIT
  437:	  0378			BCDINC_HIGH:
  438:	  0378	54 F0				ANL A,#0F0H
  439:	  037A	B4 90 06			CJNE A,#90H,BCDINC_HIGH1
  440:	  037D	53 3D 0F			ANL 3DH,#0FH
  441:	  0380	02 03 89			LJMP BCDINC_EXIT
  442:	  0383			BCDINC_HIGH1:
  443:	  0383	E5 3D				MOV A,3DH
  444:	  0385	24 10				ADD A,#10H
  445:	  0387	F5 3D				MOV 3DH,A
  446:	  0389			BCDINC_EXIT:
  447:	  0389	D0 E0				POP ACC
  448:	  038B	22				RET
  449:
  450:	  038C	C0 E0		BCDDEC:	PUSH ACC
  451:	  038E	E5 3D				MOV A,3DH
  452:	  0390	20 7F 10			JB 7FH,BCDDEC_HIGH
  453:	  0393	54 0F				ANL A,#0FH
  454:	  0395	B4 00 06			CJNE A,#00H,BCDDEC_LOW1
  455:	  0398	43 3D 09			ORL 3DH,#09H
  456:	  039B	02 03 B4			LJMP BCDDEC_EXIT
  457:	  039E			BCDDEC_LOW1:
  458:	  039E	15 3D				DEC 3DH
  459:	  03A0	02 03 B4			LJMP BCDDEC_EXIT
  460:	  03A3			BCDDEC_HIGH:
  461:	  03A3	54 F0				ANL A,#0F0H
  462:	  03A5	B4 00 06			CJNE A,#00H,BCDDEC_HIGH1
  463:	  03A8	43 3D 90			ORL 3DH,#90H
  464:	  03AB	02 03 B4			LJMP BCDDEC_EXIT
  465:	  03AE			BCDDEC_HIGH1:
  466:	  03AE	E5 3D				MOV A,3DH
  467:	  03B0	94 10				SUBB A,#10H
  468:	  03B2	F5 3D				MOV 3DH,A
  469:	  03B4			BCDDEC_EXIT:
  470:	  03B4	D0 E0				POP ACC
  471:	  03B6	22				RET
  472:
  473:	  03B7			CLOSEDIG:				;根据选位标志，关闭某一位的现实，实现闪烁功能
  474:	  03B7	C0 E0				PUSH ACC
  475:	  03B9	E5 3E				MOV A,3EH
  476:	  03BB	20 7F 05			JB 7FH,CLOSEDIG_HIGH
  477:	  03BE	44 0F				ORL A,#0FH
  478:	  03C0	02 03 C5			LJMP CLOSEDIG_EXIT
  479:	  03C3			CLOSEDIG_HIGH:
  480:	  03C3	44 F0				ORL A,#0F0H
  481:	  03C5			CLOSEDIG_EXIT:
  482:	  03C5	F5 38				MOV 38H,A
  483:	  03C7	75 39 FD			MOV 39H,#LDD6

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 10



 Line  I  Addr  Code            Source

  484:	  03CA	12 04 31			LCALL DISPLAY_NUMBER
  485:	  03CD	D0 E0				POP ACC
  486:	  03CF	22				RET
  487:				;-------------END OF 按键中断处理程序----------------
  488:
  489:	  03D0			HEX2BCD:			  ;将38H中的16进制数转为BCD码
  490:	  03D0	C0 E0				PUSH ACC
  491:	  03D2	E5 38				MOV A,38H
  492:	  03D4	75 F0 0A			MOV B,#10
  493:	  03D7	84				DIV AB
  494:	  03D8	C4				SWAP A
  495:	  03D9	45 F0				ORL A,B
  496:	  03DB	F5 38				MOV 38H,A
  497:	  03DD	D0 E0				POP ACC
  498:	  03DF	22				RET
  499:				;---------------------------
  500:	  03E0			GET_LIGHT_TIME:							;获取当前红灯时间子程序，存入30h和31
				h
  501:	  03E0	C0 83				PUSH DPH						;默认红灯时间大于3秒
  502:	  03E2	C0 82				PUSH DPL
  503:	  03E4	C0 E0				PUSH ACC
  504:	  03E6	C0 D0				PUSH PSW
  505:	  03E8	D2 D3				SETB RS0
  506:	  03EA	90 04 BE			MOV DPTR,#TAB_LIGHT_TIME ;读入信号灯延时信息,30H为红灯A，31H为红灯B
  507:	  03ED	E5 37				MOV A,37H
  508:	  03EF	23				RL A
  509:	  03F0	93				MOVC A,@A+DPTR
  510:	  03F1	F5 30				MOV 30H,A
  511:	  03F3	E5 37				MOV A,37H
  512:	  03F5	23				RL A
  513:	  03F6	04				INC A
  514:	  03F7	93				MOVC A,@A+DPTR
  515:	  03F8	F5 31				MOV 31H,A
  516:						;检查是否有用户自定义数据
  517:	  03FA	E5 37				MOV A,37H
  518:	  03FC	23				RL A
  519:	  03FD	24 50				ADD A,#50H
  520:	  03FF	F8				MOV R0,A
  521:	  0400	04				INC A
  522:	  0401	F9				MOV R1,A
  523:	  0402	E6				MOV A,@R0
  524:	  0403	47				ORL A,@R1
  525:	  0404	60 12				JZ GET_LIGHT_TIME_EXIT ;若全为零，说明无用户定义数据，直接跳出
  526:	  0406	B6 00 04			CJNE @R0,#00H,GET_LIGHT_TIME_NEXT1
  527:	  0409	87 30				MOV 30H,@R1			   ;若只有一个为0，则使两路口数字相等
  528:	  040B	81 0F				AJMP GET_LIGHT_TIME_NEXT2
  529:	  040D			GET_LIGHT_TIME_NEXT1:
  530:	  040D	86 30				MOV 30H,@R0
  531:	  040F			GET_LIGHT_TIME_NEXT2:
  532:	  040F	B7 00 04			CJNE @R1,#00H,GET_LIGHT_TIME_NEXT3
  533:	  0412	86 31				MOV 31H,@R0
  534:	  0414	81 18				AJMP GET_LIGHT_TIME_EXIT
  535:	  0416			GET_LIGHT_TIME_NEXT3:
  536:	  0416	87 31				MOV 31H,@R1
  537:	  0418			GET_LIGHT_TIME_EXIT:
  538:	  0418	C2 D3				CLR RS0

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 11



 Line  I  Addr  Code            Source

  539:	  041A	D0 D0				POP PSW
  540:	  041C	D0 E0				POP ACC
  541:	  041E	D0 82				POP DPL
  542:	  0420	D0 83				POP DPH
  543:	  0422	22				RET
  544:				;--------------------
  545:	  0423			CHANGE_LIGHT:				;开信号灯子程序
  546:	  0423	C0 83				PUSH DPH
  547:	  0425	C0 E0				PUSH ACC
  548:	  0427	75 83 FE			MOV DPH,#LED
  549:	  042A	E6				MOV A,@R0
  550:	  042B	F0				MOVX @DPTR,A
  551:	  042C	D0 E0				POP ACC
  552:	  042E	D0 83				POP DPH
  553:	  0430	22				RET
  554:				;-------------------------
  555:	  0431			DISPLAY_NUMBER:				;显示倒计时数字子程序，显示38H中的数字到39H指定的地址中 先显
				示低位，再显示高位
  556:	  0431	C0 E0				PUSH ACC
  557:	  0433	E5 38				MOV A,38H
  558:	  0435	53 38 0F			ANL 38H,#0FH
  559:	  0438	12 04 55			LCALL GETDIGIT
  560:	  043B	85 39 83			MOV DPH,39H
  561:	  043E	12 04 6A			LCALL DISDIGIT
  562:	  0441	C4				SWAP A
  563:	  0442	F5 38				MOV 38H,A
  564:	  0444	53 38 0F			ANL 38H,#0FH
  565:	  0447	12 04 55			LCALL GETDIGIT
  566:	  044A	15 39				DEC 39H
  567:	  044C	85 39 83			MOV DPH,39H
  568:	  044F	12 04 6A			LCALL DISDIGIT
  569:	  0452	D0 E0				POP ACC
  570:	  0454	22				RET
  571:				;-----------------------------
  572:	  0455			GETDIGIT:					;取段码子程序
  573:	  0455	C0 83				PUSH DPH
  574:	  0457	C0 82				PUSH DPL
  575:	  0459	C0 E0				PUSH ACC
  576:	  045B	90 04 AE			MOV DPTR,#DIGIT
  577:	  045E	E5 38				MOV A,38H
  578:	  0460	93				MOVC A,@A+DPTR
  579:	  0461	C5 38				XCH A,38H
  580:	  0463	D0 E0				POP ACC
  581:	  0465	D0 82				POP DPL
  582:	  0467	D0 83				POP DPH
  583:	  0469	22				RET
  584:				;--------------------------------
  585:	  046A			DISDIGIT:					;送数码管显示子程序
  586:	  046A	C0 E0				PUSH ACC
  587:	  046C	E5 38				MOV	A,38H
  588:	  046E	F0				MOVX @DPTR,A
  589:	  046F	D0 E0				POP ACC
  590:	  0471	22				RET
  591:				;------------------------------
  592:	  0472			SUBBCD:						;BCD码减一,对36H中的数做BCD码减1
  593:	  0472	C0 E0				PUSH ACC

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 12



 Line  I  Addr  Code            Source

  594:	  0474	C0 D0				PUSH PSW
  595:	  0476	15 36				DEC 36H
  596:	  0478	E5 36				MOV A,36H
  597:	  047A	54 0F				ANL A,#0FH
  598:	  047C	B4 0F 08			CJNE A,#0FH,SUBBCD_EXIT
  599:	  047F	C2 D7				CLR CY
  600:	  0481	E5 36				MOV A,36H
  601:	  0483	94 06				SUBB A,#06
  602:	  0485	F5 36				MOV 36H,A
  603:	  0487			SUBBCD_EXIT:
  604:	  0487	D0 D0				POP PSW
  605:	  0489	D0 E0				POP ACC
  606:	  048B	22				RET
  607:
  608:	  048C			DELAY10:
  609:	  048C	00				NOP
  610:	  048D	75 40 09			MOV 40H,#9
  611:	  0490	75 41 FF	DL10_1: MOV 41H,#255
  612:	  0493	00		DL10_2: NOP
  613:	  0494	00				NOP
  614:	  0495	D5 41 FB			DJNZ 41H,DL10_2
  615:	  0498	D5 40 F5			DJNZ 40H,DL10_1
  616:	  049B	00				NOP
  617:	  049C	22				RET
  618:
  619:	  049D			DELAY4ms5:
  620:	  049D	75 40 04			MOV 40H,#4
  621:	  04A0	75 41 D2	DL45_1: MOV 41H,#210
  622:	  04A3	00		DL45_2: NOP
  623:	  04A4	00				NOP
  624:	  04A5	00				NOP
  625:	  04A6	D5 41 FA			DJNZ 41H,DL45_2
  626:	  04A9	D5 40 F4			DJNZ 40H,DL45_1
  627:	  04AC	00				NOP
  628:	  04AD	22				RET
  629:				;;------------TABLES----------------
  630:	  04AE			DIGIT:							;LED数码管段码表
  631:	  04AE	3F 06 5B 4F			DB 3FH,06H,5BH,4FH,66H
	  04B2	66
  632:	  04B3	6D 7D 07 7F			DB 6DH,7DH,07H,7FH,6FH
	  04B7	6F
  633:	  04B8	77 7C 39 5E			DB 77H,7CH,39H,5EH,79H,00H
	  04BC	79 00
  634:	  04BE			TAB_LIGHT_TIME:  				;预设的信号灯时间常数，共24行，48个值
  635:	  04BE	03 04				DB 03H, 04H
  636:	  04C0	04 05				DB 04H, 05H
  637:	  04C2	05 06				DB 05H, 06H
  638:	  04C4	06 07				DB 06H, 07H
  639:	  04C6	07 08				DB 07H, 08H
  640:	  04C8	08 09				DB 08H, 09H
  641:	  04CA	09 10				DB 09H, 10H
  642:	  04CC	10 11				DB 10H, 11H
  643:	  04CE	11 12				DB 11H, 12H
  644:	  04D0	12 13				DB 12H, 13H
  645:	  04D2	13 14				DB 13H, 14H
  646:	  04D4	14 15				DB 14H, 15H

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 13



 Line  I  Addr  Code            Source

  647:	  04D6	15 16				DB 15H, 16H
  648:	  04D8	16 17				DB 16H, 17H
  649:	  04DA	17 18				DB 17H, 18H
  650:	  04DC	18 19				DB 18H, 19H
  651:	  04DE	19 20				DB 19H, 20H
  652:	  04E0	20 21				DB 20H, 21H
  653:	  04E2	21 22				DB 21H, 22H
  654:	  04E4	22 23				DB 22H, 23H
  655:	  04E6	23 24				DB 23H, 24H
  656:	  04E8	24 25				DB 24H, 25H
  657:	  04EA	25 26				DB 25H, 26H
  658:	  04EC	26 27				DB 26H, 27H
  659:				;----------- END --------------------
  660:				END





                     register banks used:  ---

                     no errors




ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 14





	       L I S T   O F   S Y M B O L S
	       =============================


SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
??ASEM_51			  NUMBER    8051
??VERSION			  NUMBER    0130
AC				  BIT	      D6
ACC				  DATA	      E0
B				  DATA	      F0
BCDDEC				  CODE	    038C	 450
BCDDEC_EXIT			  CODE	    03B4	 469
BCDDEC_HIGH			  CODE	    03A3	 460
BCDDEC_HIGH1			  CODE	    03AE	 465
BCDDEC_LOW1			  CODE	    039E	 457
BCDINC				  CODE	    0361	 427
BCDINC_EXIT			  CODE	    0389	 446
BCDINC_HIGH			  CODE	    0378	 437
BCDINC_HIGH1			  CODE	    0383	 442
BCDINC_LOW1			  CODE	    0373	 434
CHANGE_LIGHT			  CODE	    0423	 545
CLOSEDIG			  CODE	    03B7	 473
CLOSEDIG_EXIT			  CODE	    03C5	 481
CLOSEDIG_HIGH			  CODE	    03C3	 479
CY				  BIT	      D7
DELAY10				  CODE	    048C	 608
DELAY4MS5			  CODE	    049D	 619
DIGIT				  CODE	    04AE	 630
DISDIGIT			  CODE	    046A	 585
DISPLAY_NUMBER			  CODE	    0431	 555
DL10_1				  CODE	    0490	 611
DL10_2				  CODE	    0493	 612
DL45_1				  CODE	    04A0	 621
DL45_2				  CODE	    04A3	 622
DPH				  DATA	      83
DPL				  DATA	      82
EA				  BIT	      AF
ES				  BIT	      AC
ET0				  BIT	      A9
ET1				  BIT	      AB
EX0				  BIT	      A8
EX1				  BIT	      AA
EXTI0				  CODE	    0003
EXTI1				  CODE	    0013
F0				  BIT	      D5
GETDIGIT			  CODE	    0455	 572
GET_LIGHT_TIME			  CODE	    03E0	 500
GET_LIGHT_TIME_EXIT		  CODE	    0418	 537
GET_LIGHT_TIME_NEXT1		  CODE	    040D	 529
GET_LIGHT_TIME_NEXT2		  CODE	    040F	 531
GET_LIGHT_TIME_NEXT3		  CODE	    0416	 535
G_R1				  NUMBER    000C	  40
HEX2BCD				  CODE	    03D0	 489
IE				  DATA	      A8
IE0				  BIT	      89

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 15



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
IE1				  BIT	      8B
INT0				  BIT	      B2
INT1				  BIT	      B3
INT_C1				  CODE	    00AD	 106
INT_C1_BLINK			  CODE	    00B4	 110
INT_C1_BLINK_EXIT		  CODE	    00CF	 124
INT_C1_BLINK_RED		  CODE	    00C9	 121
INT_C1_EXIT			  CODE	    014C	 184
INT_C1_EXIT0			  CODE	    0189	 212
INT_C1_EXIT00			  CODE	    0177	 203
INT_C1_EXIT1			  CODE	    018C	 214
INT_C1_NEXT0			  CODE	    0120	 161
INT_C1_NEXT1			  CODE	    0139	 172
INT_C1_NEXT2			  CODE	    0143	 178
INT_C1_NORMAL			  CODE	    00D2	 126
INT_C1_NORMAL1			  CODE	    00F3	 142
INT_C1_REVERSEDISPLAY		  CODE	    0167	 196
INT_C1_UNBLINK_RED		  CODE	    00EA	 138
INT_EX0				  CODE	    018F	 218
INT_EX0_EXIT			  CODE	    01BF	 239
INT_EX0_EXIT0			  CODE	    01C1	 241
INT_EX0_EXIT1			  CODE	    01C7	 244
INT_EX0_NEXT1			  CODE	    0199	 223
INT_EX0_NEXT2			  CODE	    019F	 225
INT_EX0_NEXT3			  CODE	    01A5	 227
INT_EX0_SHOOT1			  CODE	    01A8	 228
INT_EX0_SHOOT11			  CODE	    01AD	 230
INT_EX0_SHOOT2			  CODE	    01B5	 234
INT_EX0_SHOOT22			  CODE	    01BA	 236
INT_EX1				  CODE	    01CD	 249
INT_EX1_EXIT			  CODE	    0202	 271
INT_EX1_EXIT_1			  CODE	    020F	 278
INT_TO				  CODE	    009E	  98
IP				  DATA	      B8
IT0				  BIT	      88
IT1				  BIT	      8A
KEY01				  CODE	    01F3	 266
KEY02				  CODE	    01F6	 267
KEY03				  CODE	    01F9	 268
KEY04				  CODE	    01FC	 269
KEY05				  CODE	    01FF	 270
KEY1				  CODE	    0214	 283
KEY1_NEXT1			  CODE	    022B	 292
KEY2				  CODE	    0242	 302
KEY2_R01			  CODE	    024A	 307
KEY2_R02			  CODE	    024F	 309
KEY2_R03			  CODE	    0254	 311
KEY2_R1				  CODE	    0259	 313
KEY2_R2				  CODE	    0266	 319
KEY2_R3				  CODE	    0273	 325
KEY2_R3_EXIT			  CODE	    02B7	 358
KEY2_R3_NEXT1			  CODE	    0293	 340
KEY2_R3_NEXT2			  CODE	    02A2	 348
KEY3				  CODE	    02BA	 361
KEY4				  CODE	    02BF	 364
KEY4_EXIT			  CODE	    030D	 394

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 16



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
KEY4_R01			  CODE	    02C7	 369
KEY4_R01_NEXT			  CODE	    02D3	 374
KEY4_R02			  CODE	    02E2	 379
KEY4_R03			  CODE	    02F9	 387
KEY5				  CODE	    0310	 396
KEY5_EXIT			  CODE	    035E	 425
KEY5_R01			  CODE	    0318	 400
KEY5_R01_NEXT			  CODE	    0322	 404
KEY5_R02			  CODE	    0333	 410
KEY5_R03			  CODE	    034A	 418
LDD1				  NUMBER    00F8	  33
LDD2				  NUMBER    00F9	  34
LDD3				  NUMBER    00FA	  35
LDD4				  NUMBER    00FB	  36
LDD5				  NUMBER    00FC	  37
LDD6				  NUMBER    00FD	  38
LED				  NUMBER    00FE	  39
MAIN				  CODE	    0030	  49
MINS_PER_HOUR			  NUMBER    0005	  45
OV				  BIT	      D2
P				  BIT	      D0
P0				  DATA	      80
P1				  DATA	      90
P2				  DATA	      A0
P3				  DATA	      B0
PCON				  DATA	      87
PS				  BIT	      BC
PSW				  DATA	      D0
PT0				  BIT	      B9
PT1				  BIT	      BB
PX0				  BIT	      B8
PX1				  BIT	      BA
RB8				  BIT	      9A
RD				  BIT	      B7
REN				  BIT	      9C
RESET				  CODE	    0000
RI				  BIT	      98
RS0				  BIT	      D3
RS1				  BIT	      D4
RXD				  BIT	      B0
R_G3				  NUMBER    0021	  42
R_Y4				  NUMBER    0011	  43
SBUF				  DATA	      99
SCON				  DATA	      98
SECS_PER_MIN			  NUMBER    0004	  44
SINT				  CODE	    0023
SM0				  BIT	      9F
SM1				  BIT	      9E
SM2				  BIT	      9D
SP				  DATA	      81
SUBBCD				  CODE	    0472	 592
SUBBCD_EXIT			  CODE	    0487	 603
T0				  BIT	      B4
T1				  BIT	      B5
TAB_LIGHT_TIME			  CODE	    04BE	 634
TB8				  BIT	      9B

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 17



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
TCON				  DATA	      88
TF0				  BIT	      8D
TF1				  BIT	      8F
TH0				  DATA	      8C
TH1				  DATA	      8D
TI				  BIT	      99
TIMER0				  CODE	    000B
TIMER1				  CODE	    001B
TL0				  DATA	      8A
TL1				  DATA	      8B
TMOD				  DATA	      89
TR0				  BIT	      8C
TR1				  BIT	      8E
TXD				  BIT	      B1
WR				  BIT	      B6
Y_R2				  NUMBER    000A	  41
